{include file="struct/header.html"}

<form name="formConfig" id="formConfig" method="post" action="{$smarty.const.HTTP_CMS}{$smarty.session.APPLR.URI_SEGMENT.2}/add">
<input type="hidden" name="sec_config_id" id="sec_config_id" value="{$objData.0->sec_config_id}" />
<table border=1 width=700>
	<caption>APPLR SECTION STRUCT BUILDER</caption>
	{include file="struct/menu-top.html"}
	<tr>
		<th colspan=2>FIELD INFO</th>
	</tr>
	<tr>
		<td>Field label</td>
		<td>
			<input type="text" maxlength="80" value="{$objField->name}" size="40" name="name" id="name" />
		</td>
	</tr>
	<tr>
		<td>Field name</td>
		<td>
			<input type="text" maxlength="65" value="{$objField->field_name}" size="40" name="field_name" id="field_name" />
		</td>
	</tr>
	<tr>
		<td>Tool tip</td>
		<td>
			<input type="text" maxlength="255" value="{$objField->tooltip}" size="40" name="tooltip" id="tooltip" />
		</td>
	</tr>
	<tr>
		<td>Fill is mandatory?</td>
		<td>
			<input type="radio" name="mandatory" value=1 {if $objField->mandatory == 1}checked{/if} /> Yes<br />
			<input type="radio" name="mandatory" value=0 {if $objField->mandatory == 0}checked{/if} /> No
		</td>
	</tr>
	<tr>
		<td>Requires administrative privileges?</td>
		<td>
			<input type="radio" name="admin" value=1 {if $objField->admin == 1}checked{/if} /> Yes<br />
			<input type="radio" name="admin" value=0 {if $objField->admin == 0}checked{/if} /> No
		</td>
	</tr>
	<tr>
		<th colspan=2>FIELD STRUCT</th>
	</tr>
	<tr>
		<td>Field Category</td>
		<td>
			<input type="radio" name="field" value=1 {if $objField->field == 1 || !isset($objField->field)}checked{/if} /> Dynamic<br />
			<input type="radio" name="field" value=2 {if $objField->field == 2}checked{/if} /> Relationship
		</td>
	</tr>
	<tr>
		<td>Pre-defined Struct Fields</td>
		<td>
			<select name="sec_struct_id" id="sec_struct_id">
				<option value="">N/R</option>
				{foreach from=$arrStruct name="listStruct" item="arrTmp"}
					<option value="{$arrTmp->id}" {if $arrTmp->id == $objField->sec_struct_id}selected{/if}>{$arrTmp->name}</option>
				{/foreach}
			</select>
		</td>
	</tr>
	<tr>
		<td>Section</td>
		<td>
			<select name="child_id" id="child_id" size="5" onchange="alert(this.value)">
				{foreach from=$arrFld name="listFolder" item="arrTmpFld"}
				<optgroup label="{$arrTmpFld->name}">
					{foreach from=$arrSec.{$arrTmpFld->id} name="listSec" item="arrTmpSec"}
					<option value="{$arrTmpFld->id}|{$arrTmpSec->id}"  {if $arrTmpSec->id == $objField->child_id}selected{/if}>--| {$arrTmpSec->name}</option>
					{/foreach}
				</optgroup>
				{/foreach}
			</select>
		</td>
	</tr>
	<tr>
		<td>Refered Section's Field to Exhibit</td>
		<td>
			<select name="field_rel" id="field_rel" size="5">
				{foreach from=$arrSec.1.1->fields name="listStruct" item="arrTmp"}
					<option value="{$arrTmp->id}" {if $arrTmp->id == $objField->sec_struct_id}selected{/if}>{$arrTmp->name}</option>
				{/foreach}
			</select>
		</td>
	</tr>
	<tr>
		<td>Relationship Type</td>
		<td>
			<input type="radio" name="field_type" value=2 {if $objField->field_type == 2}checked{/if} /> Check Box<br />
			<input type="radio" name="field_type" value=1 {if $objField->field_type == 1}checked{/if} /> Radio Button<br />
			<input type="radio" name="field_type" value=0 {if $objField->field_type == 0}checked{/if} /> Combo Box
		</td>
	</tr>
	<tr>
		<td colspan=2 align=right>
			<input type="submit" value="Save" />
		</td>
	</tr>
</table>
</form>

<br /><br /><br />

<table border=1 width=700>
	<tr>
		<th>Label</th>
		<th>Name in Database</th>
		<th>Data Type</th>
		<th>Mandatory</th>
		<th>Administrative</th>
		<th>Up</th>
		<th>Down</th>
		<th>Edit</th>
		<th>Delete</th>
	</tr>
	{foreach from=$objData name="listFields" item="objTmp"}
	<tr>
		<td>{$objTmp->name}</td>
		<td>{$objTmp->field_name}</td>
		<td>{$objTmp->sec_struct_name}</td>
		<td>{if $objTmp->mandatory}Yes{else}No{/if}</td>
		<td>{if $objTmp->admin}Yes{else}No{/if}</td>
		<td align="center"><a href="" title="">[ up ]</a></td>
		<td align="center"><a href="" title="">[ down ]</a></td>
		<td align="center"><a href="" title="">[ edit ]</a></td>
		<td align="center">{if $objTmp->field_name != 'name'}<a href="" title="">[ delete ]</a>{/if}</td>
	</tr>
	{/foreach}
	<tr>
		<td colspan=9 align=right>
			<input type="submit" value="Finish" />
		</td>
	</tr>
</table>

{include file="struct/footer.html"}